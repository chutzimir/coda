#		 Master Coda Makeconf file
# sets:
#	VPATH, DIRS, FLAGS, LIBRARIES, <>_RPC2
# includes:
#	Makefile.setup,	configs/Makeconf.$(SYS)

# 11/18/96 Created, Josh Raiff
# 11/19/96 Modified, Peter Braam
# 01/03/03 Added liblka, Satya


#########################################################
#  Coda 4.5.0 build environment
#  little here should need editing
#########################################################

include $(TOPOBJ)/Makeconf.setup

LIBEXECDIR:=$(libexecdir)
BINDIR:=$(bindir)
SBINDIR:=$(sbindir)
INITDIR:=$(prefix)/$(initsuffix)
MANDIR:=$(mandir)

-include $(TOPDIR)/configs/Makeconf.$(SYS)

##############################
# VPATH & INCLUDE DIRECTORY
##############################

INCLDIR=$(TOPOBJ)/include

ifneq ($(VPATH),)
    colon=:
    INCLPATH  := .:$(VPATH):$(INCLDIR)
    INCLFLAGS := -I. -I$(VPATH) -I$(INCLDIR) -I$(TOPOBJ)
else
    INCLPATH  := .:$(INCLDIR)
    INCLFLAGS := -I. -I$(INCLDIR) -I$(TOPOBJ)
endif

vpath %.h $(INCLPATH)
vpath %.rpc2 $(INCLPATH)

##############################
# Machine independent FLAGS
##############################

DEPFLAG   := -MD
CFLAGS	  := -Wall $(DEPFLAG) $(MACHINE_FLAGS) $(INCLFLAGS) $(CFLAGS)
CXXFLAGS  := -Wall $(DEPFLAG) $(MACHINE_FLAGS) $(INCLFLAGS) $(CXXFLAGS)

RP2FLAGS  = -e  -I . -I $(srcdir) 

LIBS	  := $(LIBS) $(LIBFIXUP)

##############################
# Library definitions
##############################
LIBRVM    := -lrvm
LIBRDS    := -lrds
LIBSEG    := -lseg
LIBRVMLWP := -lrvmlwp
LIBRDSLWP := -lrdslwp
LIBRPC2   := -lrpc2
LIBSE     := -lse
LIBFAIL   := # -lfail

LIBMATH	    := -lm
LIBREADLINE := -lreadline

# -- CODA --
LIBAL        := ../al/libal.a
LIBAUTH2     := ../auth2/libauth2.a
LIBAUSER     := ../auth2/libauser.a
LIBBASE      := $(TOPOBJ)/lib-src/base/libbase.a
LIBRWCDB     := $(TOPOBJ)/lib-src/rwcdb/librwcdb.a
LIBDIRLIB    := ../dir/libcodadir.a
LIBDS        := ../ds/libds.a
LIBKERNDEP   := ../kerndep/libkerndep.a   # --- (pioctl, setpag)
LIBLKA       := ../lka/liblka.a
LIBPARTITION := ../partition/libpartition.a
LIBPORTMAP   := ../portmapper/libportmap.a
LIBREPIO     := ../librepair/librepio.a
LIBCLNREPAIR := ../librepair/libclnrepair.a
LIBRES       := ../resolution/libres.a
LIBUTIL      := ../util/libutil.a
LIBVICEDEP   := ../vicedep/libvicedep.a
LIBVICEERROR := ../vice/libviceerror.a
LIBVOL       := ../vol/libvol.a
LIBVOLUTIL   := ../volutil/libvolutil.a
LIBVOLSERV   := ../volutil/libvolserv.a
LIBVV        := ../vv/libvv.a


##############################
# RPC2 interface definitions in module vicedep
##############################
ADVSKK_RPC2    := ../vicedep/adv_skk.rpc2
VENUSADV_RPC2  := ../vicedep/venus_adv.rpc2
CALLBACK_RPC2  := ../vicedep/callback.rpc2
MOND_RPC2      := ../vicedep/mond.rpc2
RES_RPC2       := ../vicedep/res.rpc2
VCRCOMMON_RPC2 := ../vicedep/vcrcommon.rpc2
VICE_RPC2      := ../vicedep/vice.rpc2
VOLDUMP_RPC2   := ../vicedep/voldump.rpc2
VOLUTIL_RPC2   := ../vicedep/volutil.rpc2
