
AC_INIT(coda-src/resolve/resolve.h)

dnl Checks for programs.
AC_PROG_AWK
AC_PROG_CC
AC_PROG_CXX
AC_PROG_CPP
AC_PROG_LEX
AC_PROG_LN_S
AC_PROG_MAKE_SET
AC_PROG_RANLIB
AC_PROG_YACC

CODA_CC_FNO_EXCEPTIONS
CODA_CXX_FNO_EXCEPTIONS

AC_PATH_PROG(CP, cp, "")
AC_PATH_PROG(DF, df, "")
AC_PATH_PROG(GREP, grep, "")
AC_PATH_PROG(HOSTNAME, hostname, "")
AC_PATH_PROG(PERL, perl, "")
AC_PATH_PROGS(TIXWISH, [tixwish tixwish-tk4.1 tixwish4.1.8.0], "/usr/bin/tixwish")

AC_CHECK_LIB(termcap, main)

dnl  Substitute the top of the object directory
TOPOBJ=`pwd`
AC_SUBST(TOPOBJ)

dnl  Enable second shadow source area
AC_SUBST(SECSRC)
AC_ARG_ENABLE(srcdir, [Second shadow directory (srcdir)], SECSRC=$enable_srcdir)

sinclude(configs/codaconf.m4)

AC_OUTPUT(Makefile Makeconf.setup  
configs/Makefile 
kernel-src/Makefile 
kernel-src/vfs/Makefile  
kernel-src/vfs/includes/Makefile 
lib-src/Makefile 
lib-src/mlwp/Makefile 
lib-src/base/Makefile
lib-src/special-includes/Makefile 
rvm-src/Makefile 
rvm-src/rvm/Makefile 
rvm-src/seg/Makefile 
rvm-src/rds/Makefile 
rvm-src/tests/Makefile 
coda-src/Makefile 
coda-src/scripts/Makefile 
coda-src/kerndep/Makefile 
coda-src/partition/Makefile 
coda-src/dir/Makefile  
coda-src/rpc2/Makefile 
coda-src/portmapper/Makefile 
coda-src/util/Makefile 
coda-src/libal/Makefile 
coda-src/rp2gen/Makefile 
coda-src/pdbstuff/Makefile 
coda-src/blurb/Makefile 
coda-src/fail/Makefile 
coda-src/vicedep/Makefile  
coda-src/auth2/Makefile 
coda-src/vv/Makefile 
coda-src/vol/Makefile 
coda-src/resolve/Makefile 
coda-src/venus/Makefile 
coda-src/advice/Makefile 
coda-src/repair/Makefile 
coda-src/res/Makefile 
coda-src/rvmres/Makefile 
coda-src/volutil/Makefile 
coda-src/vtools/Makefile 
coda-src/guitools/Makefile 
coda-src/vice/Makefile 
coda-src/update/Makefile 
coda-src/norton/Makefile 
coda-src/asr/Makefile 
coda-src/egasr/Makefile  
utils-src/Makefile 
utils-src/potemkin/Makefile 
utils-src/potemkin/ds/Makefile 
utils-src/potemkin/potemkin/Makefile  
cygwin/Makefile 
cygwin/sys/Makefile
djgpp/Makefile 
djgpp/relay/Makefile 
djgpp/inject/Makefile 
djgpp/tests/Makefile
coda-src/partition/tests/Makefile 
coda-src/util/tests/Makefile 
coda-src/venus/tests/Makefile  
coda-src/advice/tests/Makefile 
coda-src/guitools/tests/Makefile ,
mkdir rvm-src/rvmlwp 
ln -s ../rvm/Makefile rvm-src/rvmlwp/Makefile
mkdir rvm-src/rdslwp
ln -s ../rds/Makefile rvm-src/rdslwp/Makefile 
 )
