# 
# BLURB gpl
# 
#                            Coda File System
#                               Release 5
# 
#           Copyright (c) 1987-1999 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#*/

TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(TOPDIR)/Makeconf

DEPLIBS :=  ../$(LIBUTIL) ../$(LIBVICEDEP) ../$(LIBKERNDEP)
LIBS := $(DEPLIBS) $(LIBRPC2) $(LIBSE) $(LIBFAIL) $(LIBLWP) $(LIBGDBM) $(LIBS)
OTHERLIBS = $(LIBSYS) $(LIBKVM)

OBJECTS = replacementlog_test.o programspy_test.o
VOBJS = fake_venus.o demo_handler.o ../conversions.o

TESTS = replacementlog_test programspy_test fake_advice fake_venus


replacementlog_test: replacementlog_test.o ../libadvice.a
	$(CXX) $(CFLAGS) -o replacementlog_test replacementlog_test.o ../libadvice.a $(LIBS)

programspy_test: programspy_test.o ../libadvice.a
	$(CXX) $(CFLAGS) -o programspy_test programspy_test.o ../libadvice.a $(LIBS)

fake_advice: $(DEPLIBS) ../libfakeadvice.a ../advice_srv
	$(CXX) $(LIBFLAGS) ../advice_srv.o ../libfakeadvice.a $(LIBS) $(OTHERLIBS) -o fake_advice
	

fake_venus: $(VOBJS) $(DEPLIBS)
	$(CXX) $(CFLAGS) $(LIBFLAGS) $(VOBJS) $(LIBS) $(OTHERLIBS) -o fake_venus

include $(TOPDIR)/configs/Makerules
