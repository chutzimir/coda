# 
# BLURB gpl
# 
#                            Coda File System
#                               Release 6
# 
#           Copyright (c) 1987-2003 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#*/

TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(TOPDIR)/Makeconf

EXECUTABLES = vcodacon
CBINS       = vcodacon
LIBRARIES   =
HEADERS	    =
CMANPAGES   = # vcodacon.1

DEBUG =  -DDEBUG

CXXFLAGS += $(DEBUG) @GUIFLAGS@
DEPLIBS :=

LIBS := -lfltk @GUILIBS@ $(LIBBASE)

OBJS = vcodacon.o Inet.o monitor.o util.o

ifdef VCODACON
vcodacon: ${OBJS} $(DEPLIBS)
	$(CXX) $(LDFLAGS) ${OBJS} $(LIBS) -o vcodacon

vcodacon.cc vcodacon.h: vcodacon.fl 
	fluid -c $(srcdir)/vcodacon.fl
else
vcodacon:
	-echo "#!/bin/sh" > vcodacon
	-echo "echo fltk libraries not found during build." >> vcodacon
	-chmod 755 vcodacon
	touch vcodacon
endif

EXTRACLEAN = vcodacon.cc vcodacon.h

include $(TOPDIR)/configs/Makerules

# deps
vcodacon.o: Inet.h util.h monitor.h vcodacon.h
monitor.o util.o: util.h monitor.h vcodacon.h
Inet.o: Inet.h
