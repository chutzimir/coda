# 
# BLURB gpl
# 
#                            Coda File System
#                               Release 5
# 
#           Copyright (c) 1987-1999 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#*/
TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

# Need to conditionalize this
include $(TOPDIR)/Makeconf

VENUS-SCRIPTS = vutil volmunge venus-setup coda-setup-ports

VOL-SCRIPTS	= createvol_rep purgevol purgevol_rep bldvldb.sh
VICE-SCRIPTS	= startserver codastart
REINIT-SCRIPTS	= partial-reinit.sh
UPGRADE-SCRIPTS	= pwdtopdbtool.py
VICE-SETUP      = vice-setup vice-setup-rvm vice-setup-scm vice-setup-srvdir vice-setup-user vice-killvolumes coda-setup-ports

BACKUP-SCRIPTS	= backup.sh tape.pl

ifeq ($(SYS),linux)
  # use SYSV style init scripts
  CINIT-SCRIPTS   = venus.init
  SINIT-SCRIPTS   = codasrv.init auth2.init update.init
else
ifeq ($(SYS),solaris2)
  # use SYSV style init scripts
  CINIT-SCRIPTS   = venus.init
  SINIT-SCRIPTS   = codasrv.init auth2.init update.init
else
  # use BSD style init scripts
  CINIT-SCRIPTS   = # rc.venus
  SINIT-SCRIPTS   = rc.vice
endif
endif

# all scripts
SCRIPTS := $(VENUS-SCRIPTS) $(BACKUP-SCRIPTS) $(INIT-SCRIPTS)\
	   $(VOL-SCRIPTS) $(VICE-SCRIPTS) $(REINIT-SCRIPTS) $(UPGRADE-SCRIPTS)

# init scripts are installed here
BINDIR := $(INITDIR)

CSCRIPTS = $(CINIT-SCRIPTS)
CSSCRIPTS = $(VENUS-SCRIPTS)

SSCRIPTS = $(SINIT-SCRIPTS)
SSSCRIPTS = $(BACKUP-SCRIPTS) $(VICE-SCRIPTS) $(REINIT-SCRIPTS) $(VOL-SCRIPTS) $(VICE-SETUP) $(UPGRADE-SCRIPTS)

include $(TOPDIR)/configs/Makerules

