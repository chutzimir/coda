# 
# BLURB gpl
# 
#                            Coda File System
#                               Release 5
# 
#           Copyright (c) 1987-1999 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#*/
TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(TOPDIR)/Makeconf

ifneq ($(SHORTSYS),djgpp)
EXECUTABLES = filcon
CBINS       = $(EXECUTABLES)
SBINS       = $(EXECUTABLES)
endif

LIBRARIES   = libfail.a
HEADERS     = ${RP2FILES} fail.h 
RP2HEADERS  = fcon.h

DEPLIBS = ${LIBRPC2} ${LIBSE} ${LIBUTIL} ${LIBBASE}
LIBS := ${DEPLIBS} ${LIBLWP} ${LIBREADLINE} ${LIBTERMCAP} ${LIBCOMPAT} \
    ${LIBFIXUP} ${LIBS}

# No longer of interest: tvclient tvserver ftclient ftserver 
OBJS = fcon.client.o fcon.server.o filtutil.o fcon.o fail.o delay.o clear.o isolate.o list.o join.o slow.o heal.o partition.o newpartition.o

libfail.a: ${OBJS}

filcon: filcon.o libfail.a ${DEPLIBS}
	${CC} ${LDFLAGS} filcon.o libfail.a ${LIBS} -o filcon

include $(TOPDIR)/configs/Makerules
