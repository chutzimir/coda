
#                            CODA FILE SYSTEM
#                              Release 2.0
#                       School of Computer Science
#                       Carnegie Mellon University
#                           Copyright 1987-94
# 
# Coda  may  be  used  under license outside Carnegie Mellon University.
# Contact  the  Coda  Project   Coordinator   for   licensing   details.
# Unlicensed use or distribution of this code is illegal.
# 
# 
# static char *rcsid = "$Header$";


TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(TOPDIR)/Makeconf

EXECUTABLES = norton norton-reinit
SCRIPTS     = reinit
SBINS       = $(EXECUTABLES) $(SCRIPTS)

NLIBS =	$(LIBIBERTY) \
	$(LIBAUTH2)	\
	$(SALVAGE_O) 	\
	$(LIBRVMRES)	\
	$(LIBVOL)	\
	$(LIBVOLUTIL)	\
	$(LIBRESLIB)	\
	$(LIBVV)	\
	$(LIBRPC2) 	\
	$(LIBAL)	\
	$(LIBSYSENT)	\
	$(LIBDIRLIB)	\
	${LIBPARTITION}\
	$(LIBUTIL) 	\
	$(LIBCODARDS) 	\
	$(LIBSEG) 	\
	$(LIBCODARVM) 	\
	$(LIBOLDLWP)	\
	$(LIBBASE)      \
	$(LIBMACH)	\
	$(LIBCOMPAT)	\
	$(LIBREADLINE)  \
	$(LIBTERMCAP)

common_objects = norton-setup.o commands.o norton-volume.o \
		 norton-recov.o norton-vnode.o norton-dir.o norton-rds.o dummy.o

norton_objs =	norton.o ${common_objects}
reinit_objs =	norton-reinit.o ${common_objects}

norton: ${norton_objs} ${NLIBS}
	$(CXX) $(LIBFLAGS) ${norton_objs} ${NLIBS} -o norton

norton-reinit: ${reinit_objs} ${NLIBS}
	$(CXX) $(LIBFLAGS) ${reinit_objs} ${NLIBS} -o norton-reinit

include $(TOPDIR)/configs/Makerules
