# BLURB gpl
# 
#                            Coda File System
#                               Release 5
# 
#           Copyright (c) 1987-1999 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#*/

TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(TOPDIR)/Makeconf

EXECUTABLES = norton norton-reinit
SCRIPTS     = reinit
SBINS       = $(EXECUTABLES) $(SCRIPTS)

DEPLIBS = $(LIBAUTH2)	\
	$(LIBRES)	\
	$(LIBAL)	\
	$(LIBREPAIR)	\
	$(LIBVOL)	\
	$(LIBVOLUTIL)	\
	$(LIBVV)	\
	${LIBPARTITION}\
	$(LIBSYSENT)	\
	$(LIBDIRLIB)	\
	$(LIBUTIL) 	\
	$(LIBBASE)

LIBS := $(DEPLIBS) $(LIBRDSLWP) $(LIBSEG) $(LIBRVMLWP) $(LIBRPC2) $(LIBLWP) \
	$(LIBDB) $(LIBREADLINE) $(LIBTERMCAP) $(LIBMATH) $(LIBS)

common_objects = norton-setup.o commands.o norton-volume.o \
		 norton-recov.o norton-vnode.o norton-dir.o norton-rds.o dummy.o

norton_objs =	norton.o ${common_objects}
reinit_objs =	norton-reinit.o ${common_objects}

include $(TOPDIR)/configs/Makerules

norton: ${norton_objs} ${DEPLIBS}
	$(CXX) $(LDFLAGS) ${norton_objs} ${LIBS} -o norton

norton-reinit: ${reinit_objs} ${DEPLIBS}
	$(CXX) $(LDFLAGS) ${reinit_objs} ${LIBS} -o norton-reinit
