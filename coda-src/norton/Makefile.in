
#                            CODA FILE SYSTEM
#                              Release 2.0
#                       School of Computer Science
#                       Carnegie Mellon University
#                           Copyright 1987-94
# 
# Coda  may  be  used  under license outside Carnegie Mellon University.
# Contact  the  Coda  Project   Coordinator   for   licensing   details.
# Unlicensed use or distribution of this code is illegal.
# 
# 
# static char *rcsid = "$Header$";


TOPDIR = @top_srcdir@
ifndef MAKDIR
MAKDIR = @top_srcdir@
endif
srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(MAKDIR)/Makeconf

EXECUTABLES = norton norton-reinit
SCRIPTS     = reinit
SBINS       = $(EXECUTABLES) $(SCRIPTS)

LIBS = 	$(LIBREADLINE) \
	$(LIBIBERTY) \
	$(LIBAUTH2)	\
	$(SALVAGE_O) 	\
	$(LIBVOL)	\
	$(LIBVOLUTIL)	\
	$(LIBRVMRES)	\
	$(LIBRESLIB)	\
	$(LIBVV)	\
	$(LIBRPC2) 	\
	$(LIBAL)	\
	$(LIBSYSENT)	\
	$(LIBUTIL) 	\
	$(LIBDIRLIB)	\
	${LIBPARTITION}\
	${LIBUTIL}\
	$(LIBCS)	\
	$(LIBCODARDS) 	\
	$(LIBSEG) 	\
	$(LIBCODARVM) 	\
	$(LIBOLDLWP)	\
	$(LIBMACH)	\
	$(LIBCOMPAT)	\
	-ltermcap

common_objects = norton-setup.o commands.o parser.o norton-volume.o \
		 norton-recov.o norton-vnode.o norton-dir.o norton-rds.o dummy.o

norton_objs =	norton.o ${common_objects}
reinit_objs =	norton-reinit.o ${common_objects}

norton: ${norton_objs} ${LIBS}
	$(CXX) $(LIBFLAGS) ${norton_objs} ${LIBS} -o norton

norton-reinit: ${reinit_objs} ${LIBS}
	$(CXX) $(LIBFLAGS) ${reinit_objs} ${LIBS} -o norton-reinit

parser.o: parser.cc parser.h
	$(CXX) $(CFLAGS) $(INCREADLINE) -c $< -o parser.o

commands.o: commands.cc parser.h

include $(MAKDIR)/configs/Makerules
