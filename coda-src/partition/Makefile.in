

#
# BLURB gpl
# 
#                            Coda File System
#                               Release 5
# 
#           Copyright (c) 1987-1999 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#*/
TOPDIR = @top_srcdir@

srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@


include $(TOPDIR)/Makeconf


CFLAGS := -Wall ${CFLAGS}
HEADERS   = partition.h  vicetab.h viceinode.h ftreeifs.h simpleifs.h
OBJS = vicetab.o partition.o inodeops.o simpleifs.o  ftreeifs.o makeftree.o inoder.o backupifs.o
LIBOBS = vicetab.o partition.o inodeops.o simpleifs.o ftreeifs.o backupifs.o
EXECUTABLES = makeftree inoder
SSBINS=makeftree inoder

LIBRARIES = libpartition.a
LIBS = $(LIBPARTITION) $(LIBUTIL) $(LIBRDS) $(LIBSEG) $(LIBRVM) $(LIBOLDLWP) $(LIBBASE)

ifeq ($(SYS),sol2)
LIBFIXUP += -R/usr/ucblib -L/usr/ucblib -lucb
endif


libpartition.a: $(LIBOBS)

makeftree: makeftree.o $(LIBS)
	$(CC) -o makeftree makeftree.o $(LIBS) $(LIBMATH) $(LIBFIXUP)

inoder: inoder.o $(LIBOBS)
	$(CC) -o inoder inoder.o $(LIBS) $(LIBMATH) $(LIBFIXUP)


include $(TOPDIR)/configs/Makerules
