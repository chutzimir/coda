# BLURB gpl
# 
#                            Coda File System
#                               Release 5
# 
#           Copyright (c) 1987-1999 Carnegie Mellon University
#                   Additional copyrights listed below
# 
# This  code  is  distributed "AS IS" without warranty of any kind under
# the terms of the GNU General Public Licence Version 2, as shown in the
# file  LICENSE.  The  technical and financial  contributors to Coda are
# listed in the file CREDITS.
# 
#                         Additional copyrights
#                            none currently
# 
#


TOPDIR = @top_srcdir@
ifndef MAKDIR
MAKDIR = @top_srcdir@
endif
srcdir = @srcdir@
VPATH  = @srcdir@
TOPOBJ = @TOPOBJ@

include $(MAKDIR)/Makeconf

ifneq ($(SHORTSYS),djgpp)
TESTS	    = altest
endif

CFLAGS += -Wall $(INCGDBM)

ifneq ($(SHORTSYS),djgpp)
EXECUTABLES = pdbtool altest
SSBINS      = pdbtool
LIBRARIES   = libal.a
endif
HEADERS	    = al.h prs.h


NO_LEX = yes

HFILES = al.h prs.h pdb.h pdbarray.h

libal.a:  pdbdb.o pdbpack.o alprocs.o pdb.o pdbdb.o pdbpack.o pdbprofile.o pdbarray.o 

altest: altest.o libal.a $(LIBUTIL) $(HFILES)
	$(CC) ${LIBFLAGS} altest.o libal.a $(LGDBM) -lgdbm $(LIBUTIL) $(LIBBASE) -o altest

pdbtool: pdbtool.o libal.a 
	$(CC) ${LIBFLAGS} pdbtool.o libal.a $(LGDBM) -lgdbm $(LIBBASE) $(LIBREADLINE) $(LIBTERMCAP) -o pdbtool

include $(MAKDIR)/configs/Makerules
