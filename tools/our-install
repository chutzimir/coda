#!/bin/sh

MODE=$1
DIR=$2
shift
shift
FILES=$@

SYS=`uname -s`

PATH=/bin:/usr/bin:/sbin:/usr/sbin:/usr/ucb
export PATH

if [ $SYS = NetBSD -o $SYS = FreeBSD -o $SYS = OpenBSD -o $SYS = Darwin ]
then
OWNGRP=root:wheel
else
OWNGRP=root:root
fi

case $SYS in
    CYGWIN*)
    	E=.exe ;;
    *)
	E="" ;;
esac

if [ ! -d $DIR ] ;  then mkdir -p $DIR; fi

for f in $FILES ; do
  if [ -f $f$E ] ; then
    TARGET=$DIR/`basename $f`
    if [ -f $TARGET$E ] ; then rm -f $TARGET$E; fi
    cp -p $f$E $TARGET$E
    chmod $MODE $TARGET$E
  else
    TARGET=$DIR/`basename $f`
    if [ -f $TARGET ] ; then rm -f $TARGET; fi
    cp -p $f $TARGET
    chmod $MODE $TARGET
  fi
done

