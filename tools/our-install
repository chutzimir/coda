#!/bin/sh

MODE=$1
DIR=$2
shift
shift
FILES=$@

SYS=`uname -s`

if [ $SYS = SunOS ] ; then
PATH=/bin:/usr/bin:/sbin:/usr/sbin:/usr/ucb
export PATH
else
export PATH=/bin:/usr/bin:/sbin:/usr/sbin
fi

if [ $SYS = NetBSD -o $SYS = FreeBSD ] ; then
OWNGRP=root.wheel
else
OWNGRP=root.root
fi

if [ ! -d $DIR ] ;  then mkdir -p $DIR; fi

for f in $FILES ; do
  TARGET=$DIR/`basename $f`
  if [ -f $TARGET ] ; then rm -f $TARGET; fi
  cp -p $f $TARGET
  chmod $MODE $TARGET
  if [ `whoami` = root ]; then chown $OWNGRP $TARGET ; fi
done

